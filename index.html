<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>PG IDF</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#020617;
  color:white;
  text-align:center;
}

/* ×¦×‘×¢×™× */
:root{
  --green:#22c55e;
  --dark:#020617;
  --card:#020617;
}

/* ×›×•×ª×¨×ª */
.header-big{
  font-size:64px;
  font-weight:900;
  color:var(--green);
  margin-top:80px;
  letter-spacing:4px;
}

.sub{
  color:#a7f3d0;
  margin-bottom:40px;
}

/* ×›×¨×˜×™×¡×™× */
.card{
  background:#020617;
  border:2px solid var(--green);
  box-shadow:0 0 20px rgba(34,197,94,.4);
  border-radius:12px;
  max-width:480px;
  margin:40px auto;
  padding:40px;
}

input,select,button{
  width:100%;
  padding:16px;
  font-size:18px;
  margin-top:15px;
  border-radius:8px;
  border:none;
}

input,select{
  background:#020617;
  color:white;
  border:2px solid var(--green);
}

button{
  background:var(--green);
  color:#022c22;
  font-weight:700;
  cursor:pointer;
}

button:hover{
  box-shadow:0 0 15px rgba(34,197,94,.7);
}

.hidden{display:none}

/* ××¢×¨×›×ª */
.container{
  display:flex;
  height:100vh;
}
.sidebar{
  width:260px;
  background:#020617;
  border-right:2px solid var(--green);
  padding:15px;
}
.sidebar button{
  margin-bottom:10px;
}
.content{
  flex:1;
  padding:20px;
  text-align:left;
}
.chat-box{
  background:#020617;
  border:1px solid var(--green);
  height:260px;
  overflow-y:auto;
  padding:10px;
  margin-bottom:10px;
}
.chat-input{
  display:flex;
  gap:5px;
}
.chat-input input{flex:1}
.log{font-size:13px;color:#86efac}
canvas{
  border:1px solid var(--green);
  background:#020617;
}
</style>
</head>

<body>

<!-- ×©×œ×‘ 1: ×©× -->
<div id="stepName">
  <div class="header-big">PG IDF</div>
  <div class="sub">××¢×¨×›×ª ×¤×™×§×•×“ ×¦×‘××™×ª</div>

  <div class="card">
    <h2>×‘×—×™×¨×ª ×©×</h2>
    <input id="username" placeholder="×”×›× ×¡ ×©×">
    <button onclick="confirmName()">××™×©×•×¨ ×©×</button>
  </div>
</div>

<!-- ×©×œ×‘ 2: ×“×¨×’×” -->
<div id="stepRank" class="hidden">
  <div class="header-big">×‘×—×™×¨×ª ×“×¨×’×”</div>

  <div class="card">
    <h2 id="namePreview"></h2>
    <select id="rankSelect"></select>
    <input id="cmdPass" placeholder="×¡×™×¡××ª ××¤×§×“×™× (×× ×™×©)">
    <button onclick="enterSystem()">×›× ×™×¡×” ×œ××¢×¨×›×ª</button>
  </div>
</div>

<!-- ××¢×¨×›×ª -->
<div id="system" class="container hidden">

  <div class="sidebar">
    <p id="userInfo"></p>
    <button onclick="openRoom('main')">ğŸ’¬ ×¦×³××˜</button>
    <button onclick="openRoom('ops')">ğŸ—ºï¸ ××‘×¦×¢×™×</button>
    <button id="cmdBtn" onclick="openRoom('cmd')">ğŸ‘‘ ××¤×§×“×™×</button>
    <button onclick="openRoom('map')">ğŸ—ºï¸ ××¤×”</button>
    <button onclick="openRoom('logs')">ğŸ—‚ï¸ ×™×•××Ÿ</button>
  </div>

  <div class="content">

    <div id="main" class="room">
      <h2>ğŸ’¬ ×¦×³××˜ ×¨××©×™</h2>
      <div class="chat-box" id="mainBox"></div>
      <div class="chat-input">
        <input id="mainInput"><button onclick="send('main')">×©×œ×—</button>
      </div>
    </div>

    <div id="ops" class="room hidden">
      <h2>ğŸ—ºï¸ ×—×“×¨ ××‘×¦×¢×™×</h2>
      <div class="chat-box" id="opsBox"></div>
      <div class="chat-input">
        <input id="opsInput"><button onclick="send('ops')">×©×œ×—</button>
      </div>
    </div>

    <div id="cmd" class="room hidden">
      <h2>ğŸ‘‘ ×—×“×¨ ××¤×§×“×™×</h2>
      <div class="chat-box" id="cmdBox"></div>
      <div class="chat-input">
        <input id="cmdInput"><button onclick="send('cmd')">×©×œ×—</button>
      </div>
    </div>

    <div id="map" class="room hidden">
      <h2>ğŸ—ºï¸ ××¤×” ×—×™×”</h2>
      <canvas id="mapCanvas" width="500" height="300"></canvas>
    </div>

    <div id="logs" class="room hidden">
      <h2>ğŸ—‚ï¸ ×™×•××Ÿ ×¤×¢×•×œ×•×ª</h2>
      <div class="chat-box" id="logBox"></div>
    </div>

  </div>
</div>

<script>
/* ×“×¨×’×•×ª */
const ranks=[
"×˜×•×¨××™","×¨×‘×´×˜","×¡××œ","×¡××œ ×¨××©×•×Ÿ","×¡×’×´×","×¡×’×Ÿ","×¡×¨×Ÿ","×¨×‘ ×¡×¨×Ÿ",
"×˜×™×™×¡ ×—×™×œ-×”××•×•×™×¨","×˜×™×™×¡ ×‘×›×™×¨ ×—×™×œ-×”××•×•×™×¨","×¡×’×Ÿ ××©× ×” ×—×™×œ-×”××•×•×™×¨",
"×¡×’×Ÿ ××¤×§×“ ×—×™×œ-×”××•×•×™×¨","××¤×§×“ ×—×™×œ-×”××•×•×™×¨",
"×¡×’×Ÿ ××œ×•×£","××œ×•×£ ××©× ×”","×ª×ª ××œ×•×£","××œ×•×£","×¨×‘ ××œ×•×£"
];
const CMD_INDEX=ranks.indexOf("××¤×§×“ ×—×™×œ-×”××•×•×™×¨");
const CMD_PASSWORD="1234";

ranks.forEach(r=>rankSelect.appendChild(new Option(r,r)));

let user={};

/* ×©×œ×‘ 1 */
function confirmName(){
  if(!username.value) return alert("×—×™×™×‘ ×©×");
  stepName.classList.add("hidden");
  stepRank.classList.remove("hidden");
  namePreview.innerText="×©×œ×•× " + username.value;
}

/* ×©×œ×‘ 2 */
function enterSystem(){
  user.name=username.value;
  user.rank=rankSelect.value;
  user.i=ranks.indexOf(user.rank);

  if(user.i>=CMD_INDEX && cmdPass.value!==CMD_PASSWORD)
    return alert("×¡×™×¡××ª ××¤×§×“×™× ×©×’×•×™×”");

  stepRank.classList.add("hidden");
  system.classList.remove("hidden");

  userInfo.innerText=user.rank+" | "+user.name;
  if(user.i<CMD_INDEX) cmdBtn.style.display="none";

  initMap();
}

/* ×—×“×¨×™× */
function openRoom(id){
  document.querySelectorAll(".room").forEach(r=>r.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* ×¦×³××˜ */
function send(room){
  const input=document.getElementById(room+"Input");
  const box=document.getElementById(room+"Box");
  if(!input.value) return;
  box.innerHTML+=`<p>${user.rank} ${user.name}: ${input.value}</p>`;
  log(`×”×•×“×¢×” ×‘-${room}`);
  input.value="";
  box.scrollTop=box.scrollHeight;
}

/* ×™×•××Ÿ */
function log(t){
  logBox.innerHTML+=`<p class="log">${new Date().toLocaleTimeString()} - ${t}</p>`;
}

/* ××¤×” */
function initMap(){
  const c=mapCanvas,ctx=c.getContext("2d");
  setInterval(()=>{
    ctx.clearRect(0,0,c.width,c.height);
    for(let i=0;i<5;i++){
      ctx.fillStyle="#22c55e";
      ctx.beginPath();
      ctx.arc(Math.random()*500,Math.random()*300,6,0,7);
      ctx.fill();
    }
  },3000);
}
</script>

</body>
</html>
